<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="dvm : Effortless Docker-in-a-box for unsupported Docker platforms, like the Mac" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>dvm</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/fnichol/dvm">View on GitHub</a>

          <h1 id="project_title">dvm</h1>
          <h2 id="project_tagline">Effortless Docker-in-a-box for unsupported Docker platforms, like the Mac</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/fnichol/dvm/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/fnichol/dvm/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <p>An on demand <a href="http://www.docker.io/">Docker</a> virtual machine, thanks to <a href="http://www.vagrantup.com/">Vagrant</a> and <a href="https://github.com/steeve/boot2docker">boot2docker</a>. Works great on Macs and other platforms that don't natively support the Docker daemon. Under the covers this is downloading and booting Mitchell Hashimoto's <a href="https://github.com/mitchellh/boot2docker-vagrant-box">boot2docker Vagrant Box</a> image.</p>

<h2>
<a name="-tldr-for-mac-users" class="anchor" href="#-tldr-for-mac-users"><span class="octicon octicon-link"></span></a><a name="mac-tl-dr"></a> tl;dr for Mac Users</h2>

<p>Are you already a Vagrant user using Virtualbox? Use Homebrew? Great!</p>

<div class="highlight highlight-sh"><pre><span class="c"># Install Docker Mac binary</span>
brew install docker

<span class="c"># Install dvm</span>
brew tap fnichol/dvm
brew install dvm

<span class="c"># Bring up your Vagrant/Docker VM</span>
dvm up

<span class="c"># Set a DOCKER_HOST environment variable that points to your VM</span>
<span class="nb">eval</span> <span class="k">$(</span>dvm env<span class="k">)</span>

<span class="c"># Run plain 'ol Docker commands right from your Mac</span>
docker run ubuntu cat /etc/lsb-release
</pre></div>

<p>p.s. No Vagrant or VirtualBox installed? Check out the <a href="#requirements">Requirements</a> section below.</p>

<h2>
<a name="-requirements" class="anchor" href="#-requirements"><span class="octicon octicon-link"></span></a><a name="requirements"></a> Requirements</h2>

<ul>
<li>
<a href="https://www.virtualbox.org/wiki/Downloads">VirtualBox</a>, version 4.3.4+ or <a href="vmware_fusion_dl">VMware Fusion</a>/<a href="http://www.vmware.com/go/downloadworkstation">VMware Workstation</a>
</li>
<li>
<a href="http://www.vagrantup.com/downloads.html">Vagrant</a>, version 1.4.0+</li>
<li>(<em>Optional</em>) <a href="http://docs.docker.io/en/latest/installation/">Docker</a>, version 0.7.3+ or use the <a href="http://docs.docker.io/en/latest/api/docker_remote_api/">Docker Remote API</a>
</li>
</ul><p>Use <a href="https://github.com/phinze/homebrew-cask">Homebrew Cask</a>? For Vagrant and VirtualBox, too easy!</p>

<div class="highlight highlight-sh"><pre>brew cask install vagrant    --appdir<span class="o">=</span>/Applications
brew cask install virtualbox --appdir<span class="o">=</span>/Applications
</pre></div>

<h2>
<a name="-install" class="anchor" href="#-install"><span class="octicon octicon-link"></span></a><a name="install"></a> Install</h2>

<p>Installation is supported for any Unixlike platform that Vagrant and VirtualBox/VMware support.</p>

<div class="highlight highlight-sh"><pre>wget -O dvm-0.4.1.tar.gz https://github.com/fnichol/dvm/archive/v0.4.1.tar.gz
tar -xzvf dvm-0.4.1.tar.gz
<span class="nb">cd </span>dvm-0.4.1/
sudo make install
</pre></div>

<h3>
<a name="-installing-with-homebrew-mac" class="anchor" href="#-installing-with-homebrew-mac"><span class="octicon octicon-link"></span></a><a name="install-homebrew"></a> Installing with Homebrew (Mac)</h3>

<p>There is a <a href="https://github.com/fnichol/homebrew-dvm">Homebrew tap</a> with a formula which can be installed with:</p>

<div class="highlight highlight-sh"><pre>brew tap fnichol/dvm
brew install dvm
</pre></div>

<h2>
<a name="-upgrade" class="anchor" href="#-upgrade"><span class="octicon octicon-link"></span></a><a name="upgrade"></a> Upgrade</h2>

<p>You can follow the instructions for <a href="#install">installing</a> dvm.</p>

<p>Please note however that if the underlying boot2docker basebox is upgraded between versions, you will effectively get a new virtual machine when dvm restarts. A good idea before upgrading is to destroy your current dvm instance with <code>dvm destroy</code>.</p>

<h3>
<a name="-upgrading-with-homebrew-mac" class="anchor" href="#-upgrading-with-homebrew-mac"><span class="octicon octicon-link"></span></a><a name="upgrade-homebrew"></a> Upgrading with Homebrew (Mac)</h3>

<p>If using the dvm Homebrew tap, simply:</p>

<div class="highlight highlight-sh"><pre>brew update
brew upgrade dvm
</pre></div>

<p>Also please read the above note about destroying in between upgrades.</p>

<h2>
<a name="-usage" class="anchor" href="#-usage"><span class="octicon octicon-link"></span></a><a name="usage"></a> Usage</h2>

<p>Bring up help with:</p>

<pre><code>$ dvm --help

Usage: dvm [-v|-h] command [&lt;args&gt;]

Options

  --version, -v - Print the version and exit
  --help, -h    - Display CLI help (this output)

Commands

  check           Ensure that required software is installed and present
  destroy         Stops and deletes all traces of the vagrant machine
  env             Outputs environment variables for Docker to connect remotely
  halt, stop      Stops the vagrant machine
  reload          Restarts vagrant machine, loads new configuration
  resume          Resume the suspended vagrant machine
  ssh             Connects to the machine via SSH
  status          Outputs status of the vagrant machine
  suspend, pause  Suspends the machine
  up, start       Starts and provisions the vagrant environment
  vagrant         Issue subcommands directly to the vagrant CLI
</code></pre>

<p>Keep in mind that dvm thiny wraps Vagrant so don't hesitate to use raw Vagrant commands in your <code>$HOME/.dvm</code> directory. Or use the <code>dvm vagrant</code> subcommand from anywhere:</p>

<pre><code>$ dvm vagrant --version
Vagrant 1.4.2
</code></pre>

<p>Bring up your VM with <code>dvm up</code>:</p>

<pre><code>$ dvm up
Bringing machine 'dvm' up with 'virtualbox' provider...
...&lt;snip&gt;...
[dvm] Configuring and enabling network interfaces...
[dvm] Running provisioner: shell...
[dvm] Running: inline script
---&gt; Configuring docker to bind to tcp/4243 and restarting
</code></pre>

<p>Or maybe you want to use the <code>vmware_fusion</code> Vagrant provider which isn't your default?</p>

<pre><code>$ dvm up --provider=vmware_fusion
</code></pre>

<p>Need to free up some memory? Pause your VM with <code>dvm suspend</code>:</p>

<pre><code>$ dvm suspend
[dvm] Saving VM state and suspending execution...
</code></pre>

<p>When you come back to your Dockerawesome project resume your VM with <code>dvm resume</code>:</p>

<pre><code>$ dvm resume
[dvm] Resuming suspended VM...
[dvm] Booting VM...
[dvm] Waiting for machine to boot. This may take a few minutes...
[dvm] Machine booted and ready!
</code></pre>

<p>Your local <code>docker</code> binary needs to be told that it is targetting a remote system and to not try the local Unix socket, which is the default behavior. Version 0.7.3 of Docker introduced the <code>DOCKER_HOST</code> environment variable that will set the target Docker host. By default, dvm will run your VM on a private network at <strong>192.168.42.43</strong> with Docker listening on port <strong>4243</strong>. The <code>dvm env</code> subcommand will print a suitable <code>DOCKER_HOST</code> line that can be used in your environment. If you want this loaded into your session, evaluate the resulting config with:</p>

<pre><code>$ echo $DOCKER_HOST

$ eval `dvm env`

$ echo $DOCKER_HOST
tcp://192.168.42.43:4243
</code></pre>

<p>Check your VM status with <code>dvm status</code>:</p>

<pre><code>$ dvm status
Current machine states:

dvm                       running (virtualbox)

The VM is running. To stop this VM, you can run `vagrant halt` to
shut it down forcefully, or you can run `vagrant suspend` to simply
suspend the virtual machine. In either case, to restart it again,
simply run `vagrant up`.
</code></pre>

<p>Log into your VM (via SSH) with <code>dvm ssh</code>:</p>

<pre><code>$ dvm ssh
                        ##        .
                  ## ## ##       ==
               ## ## ## ##      ===
           /""""""""""""""""\___/ ===
      ~~~ {~~ ~~~~ ~~~ ~~~~ ~~ ~ /  ===- ~~~
           \______ o          __/
             \    \        __/
              \____\______/
 _                 _   ____     _            _
| |__   ___   ___ | |_|___ \ __| | ___   ___| | _____ _ __
| '_ \ / _ \ / _ \| __| __) / _` |/ _ \ / __| |/ / _ \ '__|
| |_) | (_) | (_) | |_ / __/ (_| | (_) | (__|   &lt;  __/ |
|_.__/ \___/ \___/ \__|_____\__,_|\___/ \___|_|\_\___|_|
docker@boot2docker:~$ uname -a
Linux boot2docker 3.12.1-tinycore64 #1 SMP Sun Dec 8 19:38:19 UTC 2013 x86_64 GNU/Linux
docker@boot2docker:~$
</code></pre>

<h2>
<a name="-embed-in-a-project" class="anchor" href="#-embed-in-a-project"><span class="octicon octicon-link"></span></a><a name="usage-embedded"></a> Embed in a Project</h2>

<p>As the core of dvm is a Vagranfile (surprise!) you can simply download the dvm Vagrantfile into your project using the <a href="http://git.io/dvm-vagrantfile">http://git.io/dvm-vagrantfile</a> shortlink:</p>

<div class="highlight highlight-sh"><pre>wget -O Vagrantfile http://git.io/dvm-vagrantfile
</pre></div>

<h2>
<a name="-configuration" class="anchor" href="#-configuration"><span class="octicon octicon-link"></span></a><a name="configuration"></a> Configuration</h2>

<p>If you wish to change the Docker TCP port or memory settings of the virtual machine, edit <code>$HOME/.dvm/dvm.conf</code> for the configuration to be used. By default the following configuration is used:</p>

<ul>
<li>
<code>DOCKER_IP</code>: <code>192.168.42.43</code>
</li>
<li>
<code>DOCKER_PORT</code>: <code>4243</code>
</li>
<li>
<code>DOCKER_MEMORY</code>: <code>512</code> (in MB)</li>
<li>
<code>DOCKER_ARGS</code>: <code>-H unix:// -H tcp://</code>
</li>
</ul><p>See <a href="https://github.com/fnichol/dvm/blob/master/dvm.conf">dvm.conf</a> for more details.</p>

<h2>
<a name="-development" class="anchor" href="#-development"><span class="octicon octicon-link"></span></a><a name="development"></a> Development</h2>

<ul>
<li>Source hosted at <a href="https://github.com/fnichol/dvm">GitHub</a>
</li>
<li>Report issues/questions/feature requests on <a href="https://github.com/fnichol/dvm/issues">GitHub Issues</a>
</li>
</ul><p>Pull requests are very welcome! Make sure your patches are well tested.
Ideally create a topic branch for every separate change you make. For
example:</p>

<ol>
<li>Fork the repo</li>
<li>Create your feature branch (<code>git checkout -b my-new-feature</code>)</li>
<li>Commit your changes (<code>git commit -am 'Added some feature'</code>)</li>
<li>Push to the branch (<code>git push origin my-new-feature</code>)</li>
<li>Create new Pull Request</li>
</ol><h2>
<a name="-authors" class="anchor" href="#-authors"><span class="octicon octicon-link"></span></a><a name="authors"></a> Authors</h2>

<p>Created and maintained by <a href="https://github.com/fnichol">Fletcher Nichol</a> (<a href="mailto:fnichol@nichol.ca">fnichol@nichol.ca</a>)</p>

<h2>
<a name="-credits" class="anchor" href="#-credits"><span class="octicon octicon-link"></span></a><a name="credits"></a> Credits</h2>

<ul>
<li>
<a href="https://github.com/steeve">Steeve Morin (steeve)</a> for <a href="https://github.com/steeve/boot2docker">boot2docker</a>
</li>
<li>
<a href="https://github.com/mitchellh">Mitchell Hashimoto (mitchellh)</a> for <a href="http://www.vagrantup.com/">Vagrant</a> and <a href="https://github.com/mitchellh/boot2docker-vagrant-box">boot2docker Vagrant Box</a>
</li>
<li>
<a href="https://github.com/postmodern">Postmodern (postmodern)</a> for awesome examples of killer project skeletons in <a href="https://github.com/postmodern/chruby">chruby</a> and <a href="https://github.com/postmodern/ruby-install">ruby-install</a>
</li>
</ul><h2>
<a name="-license" class="anchor" href="#-license"><span class="octicon octicon-link"></span></a><a name="license"></a> License</h2>

<p>Apache 2.0 (see <a href="https://github.com/fnichol/dvm/blob/master/LICENSE.txt">LICENSE.txt</a>)</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">dvm maintained by <a href="https://github.com/fnichol">fnichol</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-29670723-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>


  </body>
</html>
